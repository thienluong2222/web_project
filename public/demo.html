<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Demo Test - Len M√≥c</title>
        <link rel="stylesheet" href="./css/nav.css" />
        <link rel="stylesheet" href="./css/cart.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
        />
        <style>
            .demo-container {
                max-width: 1200px;
                margin: 40px auto;
                padding: 20px;
                background: white;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }
            .demo-section {
                margin-bottom: 30px;
                padding: 20px;
                border: 1px solid #eee;
                border-radius: 6px;
            }
            .demo-buttons {
                display: flex;
                gap: 10px;
                flex-wrap: wrap;
                margin-bottom: 15px;
            }
            .demo-btn {
                padding: 8px 16px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-weight: 600;
                transition: all 0.3s ease;
            }
            .demo-btn.primary {
                background-color: #ff69b4;
                color: white;
            }
            .demo-btn.secondary {
                background-color: #6c757d;
                color: white;
            }
            .demo-btn.success {
                background-color: #28a745;
                color: white;
            }
            .demo-btn.danger {
                background-color: #dc3545;
                color: white;
            }
            .demo-btn:hover {
                transform: translateY(-1px);
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            }
            .product-demo {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin-top: 20px;
            }
            .product-card {
                border: 1px solid #ddd;
                border-radius: 8px;
                overflow: hidden;
                transition: transform 0.3s ease;
            }
            .product-card:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            }
            .product-card img {
                width: 100%;
                height: 150px;
                object-fit: cover;
            }
            .product-card-body {
                padding: 15px;
            }
            .product-card h3 {
                font-size: 1.1em;
                margin-bottom: 8px;
                color: #333;
            }
            .product-card .price {
                color: #ff69b4;
                font-weight: 600;
                margin-bottom: 10px;
            }
            .cart-status {
                background: #e8f5e8;
                border: 1px solid #4caf50;
                border-radius: 4px;
                padding: 10px;
                margin-top: 15px;
            }
        </style>
    </head>
    <body>
        <header>
            <nav class="navbar">
                <div class="navbar__container">
                    <button class="navbar__toggle" id="navbarToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <ul class="navbar__links" id="navbarLinks">
                        <li>
                            <a href="./trangchu.html" class="navbar__link"
                                >Trang Ch·ªß</a
                            >
                        </li>
                        <li>
                            <a href="./Catalog_Page.html" class="navbar__link"
                                >S·∫£n Ph·∫©m</a
                            >
                        </li>
                        <li>
                            <a href="./tintuc.html" class="navbar__link"
                                >Tin t·ª©c</a
                            >
                        </li>
                        <li>
                            <a href="./contact.html" class="navbar__link"
                                >Li√™n H·ªá</a
                            >
                        </li>
                    </ul>
                    <ul class="navbar__auth" id="navbarAuth">
                        <li>
                            <a href="./dangky.html" class="navbar__auth-link"
                                >ƒêƒÉng K√Ω</a
                            >
                        </li>
                        <li>
                            <a
                                href="./dangnhap.html"
                                class="navbar__auth-link navbar__auth-link--primary"
                                >ƒêƒÉng Nh·∫≠p</a
                            >
                        </li>
                    </ul>
                    <ul
                        class="navbar__after"
                        id="navbarAfter"
                        style="display: none"
                    >
                        <li>
                            <a
                                href="./cart.html"
                                class="navbar__icon-link"
                                title="Gi·ªè h√†ng"
                                ><i class="fas fa-shopping-cart"></i
                                ><span class="cart-count" id="cartCount"
                                    >0</span
                                ></a
                            >
                        </li>
                        <li>
                            <a
                                href="./profile.html"
                                class="navbar__icon-link"
                                title="T√†i kho·∫£n"
                                ><i class="fas fa-user"></i
                            ></a>
                        </li>
                        <li>
                            <a
                                href="#"
                                id="logoutBtn"
                                class="navbar__icon-link"
                                title="ƒêƒÉng xu·∫•t"
                                ><i class="fas fa-sign-out-alt"></i
                            ></a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>

        <main class="demo-container">
            <h1>Demo Test - Ch·ª©c nƒÉng website Len M√≥c</h1>

            <!-- Auth Demo -->
            <div class="demo-section">
                <h2>üîê Demo ƒêƒÉng nh·∫≠p / ƒêƒÉng xu·∫•t</h2>
                <div class="demo-buttons">
                    <button class="demo-btn primary" onclick="demoLogin()">
                        ƒêƒÉng nh·∫≠p User
                    </button>
                    <button class="demo-btn success" onclick="demoAdminLogin()">
                        ƒêƒÉng nh·∫≠p Admin
                    </button>
                    <button class="demo-btn danger" onclick="demoLogout()">
                        ƒêƒÉng xu·∫•t
                    </button>
                </div>
                <div id="authStatus">Tr·∫°ng th√°i: Ch∆∞a ƒëƒÉng nh·∫≠p</div>
            </div>

            <!-- Cart Demo -->
            <div class="demo-section">
                <h2>üõí Demo Gi·ªè h√†ng</h2>
                <div class="demo-buttons">
                    <button
                        class="demo-btn primary"
                        onclick="addDemoProduct('sp001')"
                    >
                        Th√™m s·∫£n ph·∫©m 1
                    </button>
                    <button
                        class="demo-btn primary"
                        onclick="addDemoProduct('sp002')"
                    >
                        Th√™m s·∫£n ph·∫©m 2
                    </button>
                    <button class="demo-btn secondary" onclick="viewCart()">
                        Xem gi·ªè h√†ng
                    </button>
                    <button class="demo-btn danger" onclick="clearCart()">
                        X√≥a gi·ªè h√†ng
                    </button>
                </div>
                <div class="cart-status" id="cartStatus">
                    Gi·ªè h√†ng: 0 s·∫£n ph·∫©m
                </div>
            </div>

            <!-- Products Demo -->
            <div class="demo-section">
                <h2>üß∂ S·∫£n ph·∫©m Demo</h2>
                <div class="product-demo">
                    <div class="product-card">
                        <img
                            src="./image_sp/LenPicture/sp001_len_yarnart_jeans.png"
                            alt="Len YarnArt Jeans"
                        />
                        <div class="product-card-body">
                            <h3>Len YarnArt Jeans</h3>
                            <div class="price">35,000 VNƒê</div>
                            <button
                                class="demo-btn primary"
                                onclick="addDemoProduct('sp001')"
                            >
                                Th√™m v√†o gi·ªè
                            </button>
                        </div>
                    </div>
                    <div class="product-card">
                        <img
                            src="./image_sp/LenPicture/sp002_len_xulamtoc.png"
                            alt="Len Xulamtoc"
                        />
                        <div class="product-card-body">
                            <h3>Len Xulamtoc</h3>
                            <div class="price">28,000 VNƒê</div>
                            <button
                                class="demo-btn primary"
                                onclick="addDemoProduct('sp002')"
                            >
                                Th√™m v√†o gi·ªè
                            </button>
                        </div>
                    </div>
                    <div class="product-card">
                        <img
                            src="./image_sp/DungCuDanLen/sp050_keo_dan.jpeg"
                            alt="K√©o ƒëan"
                        />
                        <div class="product-card-body">
                            <h3>K√©o ƒëan len</h3>
                            <div class="price">45,000 VNƒê</div>
                            <button
                                class="demo-btn primary"
                                onclick="addDemoProduct('sp050')"
                            >
                                Th√™m v√†o gi·ªè
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Demo -->
            <div class="demo-section">
                <h2>üß≠ Demo ƒêi·ªÅu h∆∞·ªõng</h2>
                <div class="demo-buttons">
                    <button
                        class="demo-btn secondary"
                        onclick="goToPage('cart.html')"
                    >
                        Trang Gi·ªè h√†ng
                    </button>
                    <button
                        class="demo-btn secondary"
                        onclick="goToPage('profile.html')"
                    >
                        Trang C√° nh√¢n
                    </button>
                    <button
                        class="demo-btn secondary"
                        onclick="goToPage('admin.html')"
                    >
                        Trang Admin
                    </button>
                    <button
                        class="demo-btn secondary"
                        onclick="goToPage('trangchu.html')"
                    >
                        Trang ch·ªß
                    </button>
                </div>
            </div>
        </main>

        <!-- Scripts -->
        <script src="./js/auth_util.js"></script>
        <script src="./js/cart.js"></script>
        <script>
            // Demo data
            const demoProducts = {
                sp001: {
                    id: "sp001",
                    name: "Len YarnArt Jeans",
                    price: 35000,
                    image_url:
                        "./image_sp/LenPicture/sp001_len_yarnart_jeans.png",
                },
                sp002: {
                    id: "sp002",
                    name: "Len Xulamtoc",
                    price: 28000,
                    image_url: "./image_sp/LenPicture/sp002_len_xulamtoc.png",
                },
                sp050: {
                    id: "sp050",
                    name: "K√©o ƒëan len",
                    price: 45000,
                    image_url: "./image_sp/DungCuDanLen/sp050_keo_dan.jpeg",
                },
            };

            // Demo functions
            function demoLogin() {
                const userData = {
                    id: "demo_user",
                    username: "demouser",
                    name: "Ng∆∞·ªùi d√πng Demo",
                    email: "demo@lenmoc.vn",
                    role: "user",
                };
                setUserLoginStatus(true, userData);
                updateAuthStatus();
            }

            function demoAdminLogin() {
                const adminData = {
                    id: "demo_admin",
                    username: "admin",
                    name: "Admin Demo",
                    email: "admin@lenmoc.vn",
                    role: "admin",
                };
                setAdminLoginStatus(true, adminData);
                updateAuthStatus();
            }

            function demoLogout() {
                logout();
                updateAuthStatus();
            }

            function addDemoProduct(productId) {
                if (typeof addToCart === "function") {
                    addToCart(productId, 1);
                } else {
                    // Fallback n·∫øu h√†m addToCart ch∆∞a load
                    const cart = JSON.parse(
                        localStorage.getItem("cart") || "[]"
                    );
                    const existingIndex = cart.findIndex(
                        (item) => item.productId === productId
                    );
                    if (existingIndex > -1) {
                        cart[existingIndex].quantity += 1;
                    } else {
                        cart.push({ productId, quantity: 1 });
                    }
                    localStorage.setItem("cart", JSON.stringify(cart));
                }
                updateCartStatus();
                updateCartCount();
            }

            function viewCart() {
                window.location.href = "cart.html";
            }

            function clearCart() {
                localStorage.removeItem("cart");
                updateCartStatus();
                updateCartCount();
            }

            function goToPage(page) {
                window.location.href = page;
            }

            function updateAuthStatus() {
                const statusEl = document.getElementById("authStatus");
                const userData = getUserData();

                if (isUserLoggedIn()) {
                    statusEl.innerHTML = `Tr·∫°ng th√°i: ƒê√£ ƒëƒÉng nh·∫≠p - ${userData.name} (${userData.role})`;
                    statusEl.style.color = "#28a745";
                } else {
                    statusEl.innerHTML = "Tr·∫°ng th√°i: Ch∆∞a ƒëƒÉng nh·∫≠p";
                    statusEl.style.color = "#dc3545";
                }
            }

            function updateCartStatus() {
                const cart = JSON.parse(localStorage.getItem("cart") || "[]");
                let totalItems = 0;
                let totalValue = 0;

                cart.forEach((item) => {
                    totalItems += item.quantity;
                    const product = demoProducts[item.productId];
                    if (product) {
                        totalValue += product.price * item.quantity;
                    }
                });

                const statusEl = document.getElementById("cartStatus");
                statusEl.innerHTML = `
                Gi·ªè h√†ng: ${totalItems} s·∫£n ph·∫©m<br>
                T·ªïng gi√° tr·ªã: ${totalValue.toLocaleString("vi-VN")} VNƒê
            `;
            }

            function updateCartCount() {
                const cart = JSON.parse(localStorage.getItem("cart") || "[]");
                const totalItems = cart.reduce(
                    (sum, item) => sum + item.quantity,
                    0
                );
                const cartCountEl = document.getElementById("cartCount");
                if (cartCountEl) {
                    cartCountEl.textContent = totalItems;
                }
            }

            // Initialize page
            document.addEventListener("DOMContentLoaded", function () {
                // Setup navbar
                const toggleBtn = document.getElementById("navbarToggle");
                const links = document.getElementById("navbarLinks");
                const auth = document.getElementById("navbarAuth");
                const after = document.getElementById("navbarAfter");

                if (toggleBtn) {
                    toggleBtn.addEventListener("click", () => {
                        links.classList.toggle("show");
                        if (isUserLoggedIn()) {
                            after.classList.toggle("show");
                        } else {
                            auth.classList.toggle("show");
                        }
                    });
                }

                // Setup logout button
                const logoutBtn = document.getElementById("logoutBtn");
                if (logoutBtn) {
                    logoutBtn.addEventListener("click", function (e) {
                        e.preventDefault();
                        logout();
                        updateAuthStatus();
                    });
                }

                // Update initial state
                updateNavbarState();
                updateAuthStatus();
                updateCartStatus();
                updateCartCount();
            });
        </script>
    </body>
</html>
