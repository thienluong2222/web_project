<!--Tác giả HTML      : Phùng Đăng Khoa B2306549: Khoab2306549@student.ctu.edu.vn
    Mã nguồn tham khảo: https://www.w3schools.com/
                        https://chatgpt.com/
 -->


<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Trang quản trị</title>
        <link rel="icon" href="./images/image.png" type="image/png" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap"
            rel="stylesheet"
        />
        <script src="js/auth_util.js"></script>
        <script src="js/navbar-component.js"></script>
        <script src="js/admin.js"></script>
        <script>
            // Admin utility functions
            function showDashboard() {
                document.getElementById("main-content").style.display = "block";
                document.getElementById("user-management").style.display =
                    "none";
                updateDashboardStats();
            }

            function adminLogout() {
                if (confirm("Bạn có chắc chắn muốn đăng xuất?")) {
                    localStorage.removeItem("adminLoggedIn");
                    window.location.href = "dangnhap.html";
                }
            }

            function addNewUser() {
                const name = prompt("Nhập tên người dùng:");
                if (!name) return;

                const email = prompt("Nhập email:");
                if (!email) return;

                const phone = prompt("Nhập số điện thoại:");
                if (!phone) return;

                const password = prompt("Nhập mật khẩu:");
                if (!password) return;

                // Generate new user ID
                const users = JSON.parse(localStorage.getItem("users") || "[]");
                const newId = "user_" + Date.now();

                const newUser = {
                    id: newId,
                    name: name,
                    email: email,
                    phone: phone,
                    password: password,
                    status: "active",
                    createdAt: new Date().toISOString(),
                };

                users.push(newUser);
                localStorage.setItem("users", JSON.stringify(users));

                alert("Thêm người dùng thành công!");
                refreshUserList();
                updateStats();
            }

            function updateDashboardStats() {
                const users = JSON.parse(localStorage.getItem("users") || "[]");
                const totalUsers = users.length;
                const activeUsers = users.filter(
                    (u) => u.status === "active"
                ).length;

                document.getElementById("dashboard-users").textContent =
                    totalUsers;
                document.getElementById("dashboard-active").textContent =
                    activeUsers;
            }

            function updateStats() {
                const users = JSON.parse(localStorage.getItem("users") || "[]");
                const totalUsers = users.length;
                const activeUsers = users.filter(
                    (u) => u.status === "active"
                ).length;
                const bannedUsers = users.filter(
                    (u) => u.status === "banned"
                ).length;

                document.getElementById("total-users").textContent = totalUsers;
                document.getElementById("active-users").textContent =
                    activeUsers;
                document.getElementById("banned-users").textContent =
                    bannedUsers;

                updateDashboardStats();
            }

            // Initialize on page load
            document.addEventListener("DOMContentLoaded", function () {
                updateStats();

                // Load admin info from data.json or set defaults
                const adminInfo = {
                    id: "admin",
                    name: "Administrator",
                    email: "admin@gmail.com",
                };

                document.getElementById("admin-id").textContent = adminInfo.id;
                document.getElementById("admin-name").textContent =
                    adminInfo.name;
                document.getElementById("admin-email").textContent =
                    adminInfo.email;

                // Show dashboard by default
                showDashboard();
            });
        </script>
        <link rel="stylesheet" href="css/admin_CSS.css" />
        <link rel="stylesheet" href="./css/nav.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
            integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
    </head>
    <body class="layout-grid">
        <header>
            <!-- Navbar sẽ được tạo bởi navbar-component.js -->
        </header>

        <!-- Admin Panel Container -->
        <main class="page__main">
            <div class="container">
                <div class="left-panel">
                    <div class="avatar-section">
                        <div class="avatar">
                            <i class="fas fa-user-shield"></i>
                        </div>
                        <div>
                            <div class="section-title">Thông tin Admin</div>
                            <div class="info-item">
                                ID: <span id="admin-id">admin</span>
                            </div>
                            <div class="info-item">
                                Tên: <span id="admin-name">Administrator</span>
                            </div>
                            <div class="info-item">
                                Email:
                                <span id="admin-email">admin@gmail.com</span>
                            </div>
                        </div>
                    </div>

                    <div class="function-box">
                        <h3><i class="fas fa-cogs"></i> Chức năng quản lý</h3>
                        <button
                            onclick="showUserManagement()"
                            class="primary-btn"
                        >
                            <i class="fas fa-users"></i> Quản lý User
                        </button>
                        <button
                            onclick="refreshUserList()"
                            class="secondary-btn"
                        >
                            <i class="fas fa-sync-alt"></i> Tải lại danh sách
                        </button>
                        <button onclick="showDashboard()" class="info-btn">
                            <i class="fas fa-chart-dashboard"></i> Dashboard
                        </button>
                        <button onclick="adminLogout()" class="danger-btn">
                            <i class="fas fa-sign-out-alt"></i> Đăng xuất
                        </button>
                    </div>

                    <div class="stats-box">
                        <h3><i class="fas fa-chart-bar"></i> Thống kê</h3>
                        <div class="stat-item">
                            <i class="fas fa-user"></i>
                            <span
                                >Tổng users:
                                <strong id="total-users">0</strong></span
                            >
                        </div>
                        <!-- <div class="stat-item">
                            <i class="fas fa-user-check"></i>
                            <span
                                >Đang hoạt động:
                                <strong id="active-users">0</strong></span
                            >
                        </div> -->
                        <!-- <div class="stat-item">
                            <i class="fas fa-user-lock"></i>
                            <span
                                >Đã khóa:
                                <strong id="banned-users">0</strong></span
                            >
                        </div> -->
                    </div>
                </div>

                <div class="right-panel">
                    <!-- Welcome Dashboard -->
                    <div class="main-content-display" id="main-content">
                        <div class="welcome-header">
                            <h2>
                                <i class="fas fa-tachometer-alt"></i> Dashboard
                                Admin
                            </h2>
                            <p>
                                Chào mừng bạn đến với hệ thống quản trị người
                                dùng
                            </p>
                        </div>

                        <div class="dashboard-cards">
                            <div class="card">
                                <div class="card-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="card-content">
                                    <h3>Quản lý User</h3>
                                    <p>
                                        Xem, sửa, xóa và quản lý tài khoản người
                                        dùng
                                    </p>
                                    <button
                                        onclick="showUserManagement()"
                                        class="card-btn"
                                    >
                                        Truy cập
                                        <i class="fas fa-arrow-right"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- <div class="card">
                                <div class="card-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="card-content">
                                    <h3>Thống kê</h3>
                                    <p>
                                        Xem thống kê chi tiết về người dùng hệ
                                        thống
                                    </p>
                                    <div class="stats-mini">
                                        <span
                                            >Users:
                                            <strong id="dashboard-users"
                                                >0</strong
                                            ></span
                                        >
                                        <span
                                            >Active:
                                            <strong id="dashboard-active"
                                                >0</strong
                                            ></span
                                        >
                                    </div>
                                </div>
                            </div> -->
                        </div>

                        <div class="quick-actions">
                            <h3><i class="fas fa-bolt"></i> Thao tác nhanh</h3>
                            <div class="action-buttons">
                                <button
                                    onclick="showUserManagement()"
                                    class="action-btn"
                                >
                                    <i class="fas fa-users"></i> Quản lý User
                                </button>
                                <button
                                    onclick="refreshUserList()"
                                    class="action-btn"
                                >
                                    <i class="fas fa-sync-alt"></i> Tải lại
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- User Management Section -->
                    <div id="user-management" style="display: none">
                        <div class="management-header">
                            <h2>
                                <i class="fas fa-users"></i> Quản lý người dùng
                            </h2>
                            <button onclick="showDashboard()" class="back-btn">
                                <i class="fas fa-arrow-left"></i> Về Dashboard
                            </button>
                        </div>

                        <div class="user-controls">
                            <div class="control-group">
                                <button
                                    onclick="refreshUserList()"
                                    class="btn-refresh"
                                >
                                    <i class="fas fa-sync-alt"></i> Tải lại danh
                                    sách
                                </button>
                                <button onclick="addNewUser()" class="btn-add">
                                    <i class="fas fa-plus"></i> Thêm user mới
                                </button>
                            </div>
                            <div class="search-group">
                                <input
                                    type="text"
                                    id="userSearch"
                                    placeholder="Tìm kiếm theo tên, email hoặc số điện thoại..."
                                    onkeyup="searchUsers()"
                                />
                                <i class="fas fa-search search-icon"></i>
                            </div>
                        </div>

                        <div class="user-list" id="userList">
                            <!-- User list will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <div class="footer__container">
                <div class="footer__section">
                    <h3 class="footer__title">Về chúng tôi</h3>
                    <p class="footer__text">
                        Chào mừng bạn đến với Len Móc - nơi đam mê và sáng tạo
                        với những sợi len ấm áp. Chúng tôi cung cấp các sản phẩm
                        len móc thủ công độc đáo và nguyên liệu chất lượng cao.
                    </p>
                </div>

                <div class="footer__section">
                    <h3 class="footer__title">Danh mục</h3>
                    <ul class="footer__list">
                        <li class="footer__list-item">
                            <a href="#" class="footer__link">Len Sợi</a>
                        </li>
                        <li class="footer__list-item">
                            <a href="#" class="footer__link">Kim Móc</a>
                        </li>
                        <li class="footer__list-item">
                            <a href="#" class="footer__link">Phụ Kiện</a>
                        </li>
                        <li class="footer__list-item">
                            <a href="#" class="footer__link"
                                >Sản Phẩm Thủ Công</a
                            >
                        </li>
                    </ul>
                </div>

                <div class="footer__section">
                    <h3 class="footer__title">Hỗ trợ khách hàng</h3>
                    <ul class="footer__list">
                        <li class="footer__list-item">
                            <a href="#" class="footer__link">FAQ</a>
                        </li>
                        <li class="footer__list-item">
                            <a href="#" class="footer__link"
                                >Chính sách đổi trả</a
                            >
                        </li>
                        <li class="footer__list-item">
                            <a href="#" class="footer__link"
                                >Chính sách bảo mật</a
                            >
                        </li>
                        <li class="footer__list-item">
                            <a href="#" class="footer__link"
                                >Điều khoản dịch vụ</a
                            >
                        </li>
                    </ul>
                </div>

                <div class="footer__section">
                    <h3 class="footer__title">Liên hệ</h3>
                    <p class="footer__text">Địa chỉ: Đại học Cần Thơ</p>
                    <p class="footer__text">Điện thoại: 0123 456 789</p>
                    <p class="footer__text">Email: miee@lenmoc.vn</p>
                    <div class="footer__social-links">
                        <a
                            href="https://www.facebook.com/profile.php?id=100085507778776"
                            class="footer__social-link"
                            ><i class="fab fa-facebook-f"></i
                        ></a>
                        <a
                            href="#"
                            class="footer__social-link"
                            aria-label="Instagram"
                            ><i class="fab fa-instagram"></i
                        ></a>
                        <a
                            href="#"
                            class="footer__social-link"
                            aria-label="Pinterest"
                            ><i class="fab fa-pinterest-p"></i
                        ></a>
                    </div>
                </div>
            </div>
            <div class="footer__bottom">
                <p>&copy; 2025 Len Móc. Tất cả quyền được bảo lưu.</p>
            </div>
        </footer>

        <!-- Scripts -->
        <script src="./js/auth_util.js"></script>
        <script src="./js/navbar-component.js"></script>
        <script src="./js/admin.js"></script>
        <script>
            function showNotImplemented(functionName) {
                alert(`Chức năng "${functionName}" đang được phát triển`);
            }
        </script>
    </body>
</html>
